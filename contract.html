<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contract of Submission</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Crimson Text', serif;
            background:
                radial-gradient(circle at 20% 50%, rgba(139, 0, 0, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 50%, rgba(139, 0, 0, 0.15) 0%, transparent 50%),
                linear-gradient(135deg, #1a0a0a 0%, #2d1414 50%, #1a0a0a 100%);
            min-height: 100vh;
            padding: 40px 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .contract-container {
            max-width: 900px;
            width: 100%;
            background:
                linear-gradient(135deg, rgba(20, 10, 10, 0.95), rgba(30, 15, 15, 0.98)),
                repeating-linear-gradient(
                    45deg,
                    transparent,
                    transparent 2px,
                    rgba(139, 0, 0, 0.02) 2px,
                    rgba(139, 0, 0, 0.02) 4px
                );
            border: 3px solid #8b0000;
            box-shadow:
                0 0 0 1px rgba(255, 105, 180, 0.3),
                0 0 30px rgba(139, 0, 0, 0.6),
                inset 0 0 100px rgba(0, 0, 0, 0.8),
                0 20px 60px rgba(0, 0, 0, 0.5);
            position: relative;
            overflow: visible;
            border-radius: 5px;
        }

        /* Leather texture */
        .contract-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image:
                radial-gradient(circle at 30% 40%, rgba(80, 40, 40, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 70% 60%, rgba(80, 40, 40, 0.15) 0%, transparent 50%);
            pointer-events: none;
        }

        /* Pink bows in corners */
        .bow {
            position: absolute;
            font-size: 80px;
            z-index: 20;
            filter: drop-shadow(3px 3px 10px rgba(255, 105, 180, 0.5));
            animation: gentleBounce 3s ease-in-out infinite;
            opacity: 0.9;
        }

        @keyframes gentleBounce {
            0%, 100% { transform: translateY(0) rotate(var(--rotate)); }
            50% { transform: translateY(-5px) rotate(var(--rotate)); }
        }

        .bow-top-left {
            top: -30px;
            left: -30px;
            --rotate: -15deg;
        }

        .bow-top-right {
            top: -30px;
            right: -30px;
            --rotate: 15deg;
        }

        .bow-bottom-left {
            bottom: -30px;
            left: -30px;
            --rotate: 15deg;
        }

        .bow-bottom-right {
            bottom: -30px;
            right: -30px;
            --rotate: -15deg;
        }

        /* Chain borders */
        .chain-border {
            position: absolute;
            pointer-events: none;
            opacity: 0.7;
            z-index: 5;
        }

        .chain-vertical {
            top: 80px;
            bottom: 80px;
            width: 35px;
            background: repeating-linear-gradient(
                0deg,
                transparent 0px,
                transparent 15px,
                #1a1a1a 15px,
                #2a2a2a 18px,
                #3a3a3a 20px,
                #4a4a4a 22px,
                #3a3a3a 24px,
                #2a2a2a 27px,
                #1a1a1a 30px,
                transparent 30px,
                transparent 45px
            );
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
        }

        .chain-left {
            left: 15px;
        }

        .chain-right {
            right: 15px;
        }

        .chain-horizontal {
            left: 80px;
            right: 80px;
            height: 35px;
            background: repeating-linear-gradient(
                90deg,
                transparent 0px,
                transparent 15px,
                #1a1a1a 15px,
                #2a2a2a 18px,
                #3a3a3a 20px,
                #4a4a4a 22px,
                #3a3a3a 24px,
                #2a2a2a 27px,
                #1a1a1a 30px,
                transparent 30px,
                transparent 45px
            );
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
        }

        .chain-top {
            top: 15px;
        }

        .chain-bottom {
            bottom: 15px;
        }

        /* Subtle pink accent line */
        .pink-accent {
            position: absolute;
            background: linear-gradient(90deg, transparent, rgba(255, 105, 180, 0.3), transparent);
            pointer-events: none;
        }

        .pink-accent-top {
            top: 3px;
            left: 0;
            right: 0;
            height: 1px;
        }

        .pink-accent-bottom {
            bottom: 3px;
            left: 0;
            right: 0;
            height: 1px;
        }

        .content {
            padding: 60px 55px 55px;
            position: relative;
            z-index: 10;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 30px;
            border-bottom: 2px solid rgba(139, 0, 0, 0.6);
            position: relative;
        }

        .header::after {
            content: '‚õìÔ∏è üéÄ ‚õìÔ∏è';
            position: absolute;
            bottom: -18px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 20px;
            background: linear-gradient(135deg, rgba(20, 10, 10, 0.95), rgba(30, 15, 15, 0.98));
            padding: 0 20px;
        }

        .title {
            font-family: 'Cinzel', serif;
            font-size: 44px;
            font-weight: 700;
            background: linear-gradient(135deg, #8b0000, #ff69b4, #8b0000);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 4px;
            text-shadow: 0 0 30px rgba(255, 105, 180, 0.3);
        }

        .subtitle {
            font-size: 16px;
            color: #d4768f;
            font-style: italic;
            margin-top: 15px;
        }

        .subtitle input {
            border: none;
            border-bottom: 1px solid rgba(139, 0, 0, 0.6);
            background: rgba(255, 255, 255, 0.03);
            font-family: inherit;
            font-size: inherit;
            font-style: inherit;
            color: #ff6b9d;
            text-align: center;
            padding: 5px 12px;
            min-width: 150px;
            transition: all 0.3s ease;
        }

        .subtitle input:focus {
            outline: none;
            border-bottom-color: #ff69b4;
            background: rgba(255, 255, 255, 0.05);
            box-shadow: 0 0 15px rgba(255, 105, 180, 0.2);
        }

        .section {
            margin: 35px 0;
        }

        .section-header {
            font-family: 'Cinzel', serif;
            font-size: 26px;
            color: #dc143c;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .section-header::before {
            content: 'üéÄ';
            font-size: 22px;
            filter: drop-shadow(0 0 5px rgba(255, 105, 180, 0.5));
        }

        .section-header::after {
            content: '';
            flex: 1;
            height: 1px;
            background: linear-gradient(to right, rgba(220, 20, 60, 0.5), transparent);
        }

        .field-group {
            margin: 20px 0;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .field-label {
            font-size: 13px;
            color: #d4768f;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            margin-bottom: 8px;
            display: block;
        }

        .field-input,
        .field-textarea {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid rgba(139, 0, 0, 0.4);
            background: rgba(0, 0, 0, 0.3);
            font-family: 'Crimson Text', serif;
            font-size: 15px;
            color: #ffb6c1;
            transition: all 0.3s ease;
            border-radius: 3px;
        }

        .field-input::placeholder,
        .field-textarea::placeholder {
            color: rgba(255, 182, 193, 0.4);
        }

        .field-input:focus,
        .field-textarea:focus {
            outline: none;
            border-color: #ff69b4;
            background: rgba(0, 0, 0, 0.5);
            box-shadow:
                0 0 0 2px rgba(255, 105, 180, 0.2),
                0 0 15px rgba(255, 105, 180, 0.15),
                inset 0 0 20px rgba(255, 105, 180, 0.05);
        }

        .field-textarea {
            min-height: 95px;
            resize: vertical;
            line-height: 1.6;
        }

        .add-rule-btn {
            display: block;
            margin: 25px auto;
            padding: 12px 35px;
            background: linear-gradient(135deg, #8b0000, #dc143c);
            color: #ffb6c1;
            border: 1px solid rgba(220, 20, 60, 0.6);
            font-family: 'Cinzel', serif;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 2px;
            box-shadow:
                0 4px 15px rgba(139, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            border-radius: 3px;
        }

        .add-rule-btn::before {
            content: 'üéÄ ';
            filter: drop-shadow(0 0 3px rgba(255, 105, 180, 0.8));
        }

        .add-rule-btn::after {
            content: ' üéÄ';
            filter: drop-shadow(0 0 3px rgba(255, 105, 180, 0.8));
        }

        .add-rule-btn:hover {
            background: linear-gradient(135deg, #dc143c, #ff1744);
            border-color: #ff69b4;
            box-shadow:
                0 6px 20px rgba(220, 20, 60, 0.7),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .add-rule-btn:active {
            transform: translateY(0);
        }

        .signature-section {
            margin-top: 50px;
            padding-top: 40px;
            border-top: 2px solid rgba(139, 0, 0, 0.6);
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
        }

        .signature-box {
            text-align: center;
            position: relative;
        }

        .signature-box::before {
            content: 'üéÄ';
            position: absolute;
            top: -35px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 28px;
            filter: drop-shadow(0 0 8px rgba(255, 105, 180, 0.6));
        }

        .signature-box label {
            display: block;
            font-family: 'Cinzel', serif;
            font-size: 12px;
            color: #dc143c;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 15px;
        }

        .signature-input {
            width: 100%;
            border: none;
            border-bottom: 2px solid rgba(139, 0, 0, 0.6);
            background: transparent;
            font-family: 'Brush Script MT', 'Lucida Handwriting', cursive;
            font-size: 26px;
            color: #ff6b9d;
            text-align: center;
            padding: 10px 0;
            transition: all 0.3s ease;
        }

        .signature-input:focus {
            outline: none;
            border-bottom-color: #ff69b4;
            text-shadow: 0 0 10px rgba(255, 105, 180, 0.5);
        }

        .date-input {
            font-family: 'Crimson Text', serif !important;
            font-size: 14px !important;
            margin-top: 15px;
            color: #d4768f !important;
        }

        .decorative-divider {
            text-align: center;
            margin: 35px 0;
            font-size: 24px;
            opacity: 0.8;
        }

        .terms-notice {
            background: rgba(139, 0, 0, 0.15);
            border: 1px solid rgba(139, 0, 0, 0.4);
            border-left: 4px solid #8b0000;
            padding: 20px;
            margin: 30px 0;
            font-size: 16px;
            color: #d4768f;
            font-style: italic;
            line-height: 1.8;
            border-radius: 3px;
        }

        .list-container {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(139, 0, 0, 0.3);
            border-radius: 4px;
            padding: 20px;
            margin-top: 12px;
        }

        .list-item {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
            animation: fadeIn 0.3s ease;
        }

        .list-item::before {
            content: 'üéÄ';
            font-size: 16px;
            flex-shrink: 0;
            filter: drop-shadow(0 0 3px rgba(255, 105, 180, 0.5));
        }

        .list-item input {
            flex: 1;
            margin-bottom: 0 !important;
        }

        .add-item-btn {
            display: inline-block;
            margin: 12px 0 0 0;
            padding: 8px 20px;
            background: linear-gradient(135deg, rgba(139, 0, 0, 0.6), rgba(220, 20, 60, 0.6));
            color: #ffb6c1;
            border: 1px solid rgba(220, 20, 60, 0.4);
            font-family: 'Cinzel', serif;
            font-size: 11px;
            font-weight: 600;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            box-shadow: 0 2px 8px rgba(139, 0, 0, 0.3);
            transition: all 0.3s ease;
            border-radius: 3px;
        }

        .add-item-btn:hover {
            background: linear-gradient(135deg, rgba(220, 20, 60, 0.7), rgba(255, 20, 68, 0.7));
            border-color: rgba(255, 105, 180, 0.5);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(220, 20, 60, 0.4);
        }

        .add-item-btn::before {
            content: '+ ';
        }

        .autosave-indicator {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, rgba(139, 0, 0, 0.9), rgba(220, 20, 60, 0.9));
            color: #ffb6c1;
            padding: 10px 20px;
            border-radius: 5px;
            font-family: 'Cinzel', serif;
            font-size: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1000;
            pointer-events: none;
        }

        .autosave-indicator.show {
            opacity: 1;
        }

        @media print {
            body {
                background:
                    radial-gradient(circle at 20% 50%, rgba(139, 0, 0, 0.15) 0%, transparent 50%),
                    radial-gradient(circle at 80% 50%, rgba(139, 0, 0, 0.15) 0%, transparent 50%),
                    linear-gradient(135deg, #1a0a0a 0%, #2d1414 50%, #1a0a0a 100%);
                padding: 40px 20px;
            }

            .contract-container {
                max-width: 100%;
                box-shadow:
                    0 0 0 1px rgba(255, 105, 180, 0.3),
                    0 0 30px rgba(139, 0, 0, 0.6),
                    inset 0 0 100px rgba(0, 0, 0, 0.8),
                    0 20px 60px rgba(0, 0, 0, 0.5);
            }

            .add-rule-btn,
            .add-item-btn,
            .autosave-indicator {
                display: none !important;
            }

            @page {
                margin: 0.5in;
                size: letter;
            }
        }

        @media (max-width: 768px) {
            .content {
                padding: 50px 30px 45px;
            }

            .title {
                font-size: 34px;
            }

            .signature-section {
                grid-template-columns: 1fr;
                gap: 50px;
            }

            .bow {
                font-size: 60px;
            }
        }
    </style>
</head>
<body>
    <div class="contract-container">
        <!-- Subtle pink accent lines -->
        <div class="pink-accent pink-accent-top"></div>
        <div class="pink-accent pink-accent-bottom"></div>

        <!-- Pink bows in corners -->
        <div class="bow bow-top-left">üéÄ</div>
        <div class="bow bow-top-right">üéÄ</div>
        <div class="bow bow-bottom-left">üéÄ</div>
        <div class="bow bow-bottom-right">üéÄ</div>

        <!-- Chain borders -->
        <div class="chain-border chain-vertical chain-left"></div>
        <div class="chain-border chain-vertical chain-right"></div>
        <div class="chain-border chain-horizontal chain-top"></div>
        <div class="chain-border chain-horizontal chain-bottom"></div>

        <div class="content">
            <div class="header">
                <h1 class="title">D/s Dynamic Contract</h1>
                <p class="subtitle">
                    Between Dom
                    <input type="text" value="Matthew" readonly style="cursor: default;" aria-label="Dominant's name">
                    and his sub
                    <input type="text" value="Shailah" readonly style="cursor: default;" aria-label="Submissive's name">
                </p>
            </div>

            <div class="terms-notice">
                This contract establishes a Total Power Exchange (TPE) dynamic where the submissive willingly surrenders complete control and authority to the Dominant. The submissive acknowledges the Dominant's absolute authority in all matters and agrees to obey without question. All activities remain bound by established safe words and hard limits. Either party may terminate this agreement, though renegotiation requires the Dominant's approval.
            </div>

            <section class="section">
                <h2 class="section-header">Parties</h2>

                <div class="field-group">
                    <label class="field-label">Dominant (Owner & Caregiver)</label>
                    <input type="text" class="field-input" placeholder="Sir, Owner, Daddy...">
                </div>

                <div class="field-group">
                    <label class="field-label">Submissive (Little & Property)</label>
                    <input type="text" class="field-input" placeholder="little girl, baby girl, princess, pet, toy, belonging...">
                </div>
            </section>

            <section class="section">
                <h2 class="section-header">Commands & Absolute Rules</h2>

                <div id="rules-container">
                    <div class="field-group">
                        <label class="field-label">Command 1</label>
                        <textarea class="field-textarea" placeholder="The Dominant's absolute command or rule. The submissive must obey without hesitation..."></textarea>
                    </div>

                    <div class="field-group">
                        <label class="field-label">Command 2</label>
                        <textarea class="field-textarea" placeholder="The Dominant's absolute command or rule. The submissive must obey without hesitation..."></textarea>
                    </div>

                    <div class="field-group">
                        <label class="field-label">Command 3</label>
                        <textarea class="field-textarea" placeholder="The Dominant's absolute command or rule. The submissive must obey without hesitation..."></textarea>
                    </div>
                </div>

                <button class="add-rule-btn" onclick="addRule()">Add Command</button>
            </section>

            <div class="decorative-divider">‚õìÔ∏è üéÄ ‚õìÔ∏è</div>

            <section class="section">
                <h2 class="section-header">Boundaries</h2>

                <div class="field-group">
                    <label class="field-label">Hard Limits (Absolute No)</label>
                    <div class="list-container">
                        <div id="hard-limits-container">
                            <div class="list-item">
                                <input type="text" class="field-input" placeholder="Enter hard limit...">
                            </div>
                            <div class="list-item">
                                <input type="text" class="field-input" placeholder="Enter hard limit...">
                            </div>
                            <div class="list-item">
                                <input type="text" class="field-input" placeholder="Enter hard limit...">
                            </div>
                        </div>
                        <button class="add-item-btn" onclick="addHardLimit()">Add Hard Limit</button>
                    </div>
                </div>

                <div class="field-group">
                    <label class="field-label">Soft Limits (Requires Discussion)</label>
                    <div class="list-container">
                        <div id="soft-limits-container">
                            <div class="list-item">
                                <input type="text" class="field-input" placeholder="Enter soft limit...">
                            </div>
                            <div class="list-item">
                                <input type="text" class="field-input" placeholder="Enter soft limit...">
                            </div>
                            <div class="list-item">
                                <input type="text" class="field-input" placeholder="Enter soft limit...">
                            </div>
                        </div>
                        <button class="add-item-btn" onclick="addSoftLimit()">Add Soft Limit</button>
                    </div>
                </div>

                <div class="field-group">
                    <label class="field-label">Safe Words & Signals</label>
                    <div class="list-container">
                        <div id="safewords-container">
                            <div class="list-item">
                                <input type="text" class="field-input" placeholder="Enter safe word or signal...">
                            </div>
                            <div class="list-item">
                                <input type="text" class="field-input" placeholder="Enter safe word or signal...">
                            </div>
                            <div class="list-item">
                                <input type="text" class="field-input" placeholder="Enter safe word or signal...">
                            </div>
                        </div>
                        <button class="add-item-btn" onclick="addSafeword()">Add Safe Word/Signal</button>
                    </div>
                </div>
            </section>

            <div class="decorative-divider">‚õìÔ∏è üéÄ ‚õìÔ∏è</div>

            <section class="section">
                <h2 class="section-header">Discipline & Correction</h2>

                <div class="field-group">
                    <label class="field-label">Rewards for Obedience & Service</label>
                    <div class="list-container">
                        <div id="rewards-container">
                            <div class="list-item">
                                <input type="text" class="field-input" placeholder="Privileges granted for pleasing the Dominant...">
                            </div>
                            <div class="list-item">
                                <input type="text" class="field-input" placeholder="Privileges granted for pleasing the Dominant...">
                            </div>
                            <div class="list-item">
                                <input type="text" class="field-input" placeholder="Privileges granted for pleasing the Dominant...">
                            </div>
                        </div>
                        <button class="add-item-btn" onclick="addReward()">Add Reward</button>
                    </div>
                </div>

                <div class="field-group">
                    <label class="field-label">Punishments for Disobedience & Failure</label>
                    <div class="list-container">
                        <div id="punishments-container">
                            <div class="list-item">
                                <input type="text" class="field-input" placeholder="Consequences for failing to obey or please...">
                            </div>
                            <div class="list-item">
                                <input type="text" class="field-input" placeholder="Consequences for failing to obey or please...">
                            </div>
                            <div class="list-item">
                                <input type="text" class="field-input" placeholder="Consequences for failing to obey or please...">
                            </div>
                        </div>
                        <button class="add-item-btn" onclick="addPunishment()">Add Punishment</button>
                    </div>
                </div>
            </section>

            <div class="decorative-divider">‚õìÔ∏è üéÄ ‚õìÔ∏è</div>

            <section class="section">
                <h2 class="section-header">Terms of Ownership</h2>

                <div class="field-group">
                    <label class="field-label">Effective Date</label>
                    <input type="date" class="field-input date-input">
                </div>

                <div class="field-group">
                    <label class="field-label">Duration of Control</label>
                    <input type="text" class="field-input" placeholder="6 months, 1 year, indefinite, permanent...">
                </div>

                <div class="field-group">
                    <label class="field-label">Review Schedule (Dominant's Discretion)</label>
                    <input type="text" class="field-input" placeholder="When the Dominant chooses to review terms...">
                </div>

                <div class="field-group">
                    <label class="field-label">Release Clause</label>
                    <textarea class="field-textarea" placeholder="Conditions under which ownership may be terminated..."></textarea>
                </div>
            </section>

            <section class="signature-section">
                <div class="signature-box">
                    <label>Owner's Signature</label>
                    <input type="text" class="signature-input" placeholder="Sign here">
                    <input type="date" class="field-input date-input" aria-label="Date">
                </div>

                <div class="signature-box">
                    <label>Submissive's Acceptance</label>
                    <input type="text" class="signature-input" placeholder="Sign here">
                    <input type="date" class="field-input date-input" aria-label="Date">
                </div>
            </section>
        </div>
    </div>

    <div class="autosave-indicator" id="autosave-indicator">‚úì Saved</div>

    <script>
        let ruleCount = 3;
        let autosaveTimeout;

        // Auto-save function
        function autoSave() {
            const contractData = {
                ruleCount: ruleCount,
                hardLimits: [],
                softLimits: [],
                safewords: [],
                rewards: [],
                punishments: [],
                rules: [],
                otherFields: {}
            };

            // Save hard limits
            document.querySelectorAll('#hard-limits-container .list-item input').forEach(input => {
                contractData.hardLimits.push(input.value);
            });

            // Save soft limits
            document.querySelectorAll('#soft-limits-container .list-item input').forEach(input => {
                contractData.softLimits.push(input.value);
            });

            // Save safe words
            document.querySelectorAll('#safewords-container .list-item input').forEach(input => {
                contractData.safewords.push(input.value);
            });

            // Save rewards
            document.querySelectorAll('#rewards-container .list-item input').forEach(input => {
                contractData.rewards.push(input.value);
            });

            // Save punishments
            document.querySelectorAll('#punishments-container .list-item input').forEach(input => {
                contractData.punishments.push(input.value);
            });

            // Save rules/commands
            document.querySelectorAll('#rules-container textarea').forEach(textarea => {
                contractData.rules.push(textarea.value);
            });

            // Save all other fields with IDs
            document.querySelectorAll('input[type="text"]:not(.list-item input), input[type="date"], textarea:not(#rules-container textarea)').forEach(field => {
                if (field.id || field.getAttribute('aria-label')) {
                    const key = field.id || field.getAttribute('aria-label') || field.placeholder;
                    contractData.otherFields[key] = field.value;
                }
            });

            localStorage.setItem('contractData', JSON.stringify(contractData));
            showSaveIndicator();
        }

        // Show save indicator
        function showSaveIndicator() {
            const indicator = document.getElementById('autosave-indicator');
            indicator.classList.add('show');
            setTimeout(() => {
                indicator.classList.remove('show');
            }, 2000);
        }

        // Load saved data
        function loadSavedData() {
            const savedData = localStorage.getItem('contractData');
            if (!savedData) return;

            try {
                const contractData = JSON.parse(savedData);

                // Restore rule count
                if (contractData.ruleCount) {
                    ruleCount = contractData.ruleCount;
                }

                // Restore hard limits
                if (contractData.hardLimits && contractData.hardLimits.length > 0) {
                    const hardLimitsInputs = document.querySelectorAll('#hard-limits-container .list-item input');
                    contractData.hardLimits.forEach((value, index) => {
                        if (index >= hardLimitsInputs.length) {
                            addHardLimit();
                        }
                    });
                    // Set values
                    const updatedInputs = document.querySelectorAll('#hard-limits-container .list-item input');
                    contractData.hardLimits.forEach((value, index) => {
                        if (updatedInputs[index]) {
                            updatedInputs[index].value = value;
                        }
                    });
                }

                // Restore soft limits
                if (contractData.softLimits && contractData.softLimits.length > 0) {
                    const softLimitsInputs = document.querySelectorAll('#soft-limits-container .list-item input');
                    contractData.softLimits.forEach((value, index) => {
                        if (index >= softLimitsInputs.length) {
                            addSoftLimit();
                        }
                    });
                    const updatedInputs = document.querySelectorAll('#soft-limits-container .list-item input');
                    contractData.softLimits.forEach((value, index) => {
                        if (updatedInputs[index]) {
                            updatedInputs[index].value = value;
                        }
                    });
                }

                // Restore safe words
                if (contractData.safewords && contractData.safewords.length > 0) {
                    const safewordsInputs = document.querySelectorAll('#safewords-container .list-item input');
                    contractData.safewords.forEach((value, index) => {
                        if (index >= safewordsInputs.length) {
                            addSafeword();
                        }
                    });
                    const updatedInputs = document.querySelectorAll('#safewords-container .list-item input');
                    contractData.safewords.forEach((value, index) => {
                        if (updatedInputs[index]) {
                            updatedInputs[index].value = value;
                        }
                    });
                }

                // Restore rewards
                if (contractData.rewards && contractData.rewards.length > 0) {
                    const rewardsInputs = document.querySelectorAll('#rewards-container .list-item input');
                    contractData.rewards.forEach((value, index) => {
                        if (index >= rewardsInputs.length) {
                            addReward();
                        }
                    });
                    const updatedInputs = document.querySelectorAll('#rewards-container .list-item input');
                    contractData.rewards.forEach((value, index) => {
                        if (updatedInputs[index]) {
                            updatedInputs[index].value = value;
                        }
                    });
                }

                // Restore punishments
                if (contractData.punishments && contractData.punishments.length > 0) {
                    const punishmentsInputs = document.querySelectorAll('#punishments-container .list-item input');
                    contractData.punishments.forEach((value, index) => {
                        if (index >= punishmentsInputs.length) {
                            addPunishment();
                        }
                    });
                    const updatedInputs = document.querySelectorAll('#punishments-container .list-item input');
                    contractData.punishments.forEach((value, index) => {
                        if (updatedInputs[index]) {
                            updatedInputs[index].value = value;
                        }
                    });
                }

                // Restore rules/commands
                if (contractData.rules && contractData.rules.length > 0) {
                    const rulesTextareas = document.querySelectorAll('#rules-container textarea');
                    contractData.rules.forEach((value, index) => {
                        if (index >= rulesTextareas.length) {
                            addRule();
                        }
                    });
                    const updatedTextareas = document.querySelectorAll('#rules-container textarea');
                    contractData.rules.forEach((value, index) => {
                        if (updatedTextareas[index]) {
                            updatedTextareas[index].value = value;
                        }
                    });
                }

                // Restore other fields
                if (contractData.otherFields) {
                    Object.keys(contractData.otherFields).forEach(key => {
                        const field = document.getElementById(key) ||
                                    document.querySelector(`[aria-label="${key}"]`) ||
                                    document.querySelector(`[placeholder="${key}"]`);
                        if (field) {
                            field.value = contractData.otherFields[key];
                        }
                    });
                }

            } catch (e) {
                console.error('Error loading saved data:', e);
            }
        }

        // Debounced auto-save on input
        function scheduleAutoSave() {
            clearTimeout(autosaveTimeout);
            autosaveTimeout = setTimeout(autoSave, 500);
        }

        // Add event listeners for auto-save
        function initAutoSave() {
            document.addEventListener('input', scheduleAutoSave);
            document.addEventListener('change', scheduleAutoSave);
        }

        // Clear saved data (optional)
        function clearSavedData() {
            if (confirm('Are you sure you want to clear all saved data?')) {
                localStorage.removeItem('contractData');
                location.reload();
            }
        }

        function addRule() {
            ruleCount++;
            const container = document.getElementById('rules-container');
            const newRule = document.createElement('div');
            newRule.className = 'field-group';
            newRule.innerHTML = `
                <label class="field-label">Command ${ruleCount}</label>
                <textarea class="field-textarea" placeholder="The Dominant's absolute command or rule. The submissive must obey without hesitation..."></textarea>
            `;
            container.appendChild(newRule);
            newRule.scrollIntoView({ behavior: 'smooth', block: 'center' });
            scheduleAutoSave();
        }

        function addHardLimit() {
            const container = document.getElementById('hard-limits-container');
            const listItem = document.createElement('div');
            listItem.className = 'list-item';
            listItem.innerHTML = '<input type="text" class="field-input" placeholder="Enter hard limit...">';
            container.appendChild(listItem);
            listItem.scrollIntoView({ behavior: 'smooth', block: 'center' });
            scheduleAutoSave();
        }

        function addSoftLimit() {
            const container = document.getElementById('soft-limits-container');
            const listItem = document.createElement('div');
            listItem.className = 'list-item';
            listItem.innerHTML = '<input type="text" class="field-input" placeholder="Enter soft limit...">';
            container.appendChild(listItem);
            listItem.scrollIntoView({ behavior: 'smooth', block: 'center' });
            scheduleAutoSave();
        }

        function addSafeword() {
            const container = document.getElementById('safewords-container');
            const listItem = document.createElement('div');
            listItem.className = 'list-item';
            listItem.innerHTML = '<input type="text" class="field-input" placeholder="Enter safe word or signal...">';
            container.appendChild(listItem);
            listItem.scrollIntoView({ behavior: 'smooth', block: 'center' });
            scheduleAutoSave();
        }

        function addReward() {
            const container = document.getElementById('rewards-container');
            const listItem = document.createElement('div');
            listItem.className = 'list-item';
            listItem.innerHTML = '<input type="text" class="field-input" placeholder="Enter reward...">';
            container.appendChild(listItem);
            listItem.scrollIntoView({ behavior: 'smooth', block: 'center' });
            scheduleAutoSave();
        }

        function addPunishment() {
            const container = document.getElementById('punishments-container');
            const listItem = document.createElement('div');
            listItem.className = 'list-item';
            listItem.innerHTML = '<input type="text" class="field-input" placeholder="Enter punishment...">';
            container.appendChild(listItem);
            listItem.scrollIntoView({ behavior: 'smooth', block: 'center' });
            scheduleAutoSave();
        }

        // Initialize on page load
        window.addEventListener('load', () => {
            loadSavedData();
            initAutoSave();
        });
    </script>
</body>
</html>